package com.ratego.model;

import lombok.Data;

/*******************************************************************************
 * [Criteria]
 * 설명 : 페이징(Pagination) 처리를 위한 기준 정보(페이지 번호, 개수)를 담는 객체
 * 용도 : Controller에서 Mapper로 페이지 정보를 넘길 때 사용
 * 프로젝트 : RateGo Project
 *******************************************************************************/
@Data
public class Criteria {

    /* =================================================================
     * 1. 페이징 핵심 데이터
     * ================================================================= */
    private int pageNum;   // 현재 페이지 번호 (1, 2, 3...)
    private int amount;    // 한 페이지당 보여줄 게시글 개수 (10, 20...)
    
    /* =================================================================
     * 2. 필터링 데이터 (검색/카테고리)
     * ================================================================= */
    private String category; // 카테고리 필터 (페이지 이동 시에도 값 유지 필수)


    /*******************************************************************************
     * [CONSTRUCTORS] 초기화 로직
     *******************************************************************************/
    
    // 기본 생성자 : 값이 안 넘어오면 무조건 1페이지, 10개씩 보기로 설정
    public Criteria() {
        this(1, 10);
    }
    
    // 커스텀 생성자 : 원하는 페이지와 개수 지정
    public Criteria(int pageNum, int amount) {
        this.pageNum = pageNum;
        this.amount = amount;
    }
    

    /*******************************************************************************
     * [UTILITY] DB 쿼리용 보조 메서드
     *******************************************************************************/
    
    // MySQL/MariaDB의 LIMIT 구문에서 사용할 '시작 인덱스(Offset)' 계산
    // 공식 : (현재페이지 - 1) * 페이지당개수
    // 예시 : 1페이지 -> 0, 2페이지 -> 10, 3페이지 -> 20 ...
    public int getSkip() {
        return (pageNum - 1) * amount;
    }
}